{% import "macros/transform.html" as transform %}

{% extends "base.html" %}

{% block content %}
  <section class="post">
    <div class="title-container">
      <h2>{{ page.title }}</h2>
      <div class="info">
        <span>{{ page.reading_time }} minute read</span>
        {% if page.date and page.title != "Welcome!" %}
          <span class="divider">{{ page.date | date(format="%d %B %Y") }}</span>
        {% endif %}
      </div>
    </div>
    <article>
      {% if page.extra.banner is defined %}
        {# we're not allowed to use shortcodes here, so we'll copy/paste from shortcodes/img #}
        {% set url = page.extra.banner %}
        {% if url is containing("media.discordapp.net") %}
          {% set url = transform::to_discord_cdn(url=url) %}
        {% endif %}
        <figure class="inline-image">
          <a href="{{url}}" target="_blank"><img src="{{url}}" alt="banner" /></a>
        </figure>
        <hr />
      {% endif %}
      {{ transform::replace_tags_with_mentions(s=page.content) }}
    </article>
  </section>
{% endblock content %}
